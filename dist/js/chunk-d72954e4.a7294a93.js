(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d72954e4"],{1148:function(t,e,o){"use strict";var r=o("a691"),a=o("1d80");t.exports="".repeat||function(t){var e=String(a(this)),o="",s=r(t);if(s<0||s==1/0)throw RangeError("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(e+=e))1&s&&(o+=e);return o}},"11c0":function(t,e,o){"use strict";var r=o("ecf4"),a=o.n(r);a.a},"1afe":function(t,e,o){"use strict";var r=o("3cec"),a=o.n(r);a.a},2532:function(t,e,o){"use strict";var r=o("23e7"),a=o("5a34"),s=o("1d80"),n=o("ab13");r({target:"String",proto:!0,forced:!n("includes")},{includes:function(t){return!!~String(s(this)).indexOf(a(t),arguments.length>1?arguments[1]:void 0)}})},"39f1":function(t,e,o){},"3cec":function(t,e,o){},"408a":function(t,e,o){var r=o("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=r(t))throw TypeError("Incorrect invocation");return+t}},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,o){var r=o("1d80"),a=o("5899"),s="["+a+"]",n=RegExp("^"+s+s+"*"),i=RegExp(s+s+"*$"),c=function(t){return function(e){var o=String(r(e));return 1&t&&(o=o.replace(n,"")),2&t&&(o=o.replace(i,"")),o}};t.exports={start:c(1),end:c(2),trim:c(3)}},"5a34":function(t,e,o){var r=o("44e7");t.exports=function(t){if(r(t))throw TypeError("The method doesn't accept regular expressions");return t}},7156:function(t,e,o){var r=o("861d"),a=o("d2bb");t.exports=function(t,e,o){var s,n;return a&&"function"==typeof(s=e.constructor)&&s!==o&&r(n=s.prototype)&&n!==o.prototype&&a(t,n),t}},"7db0":function(t,e,o){"use strict";var r=o("23e7"),a=o("b727").find,s=o("44d2"),n=o("ae40"),i="find",c=!0,l=n(i);i in[]&&Array(1)[i]((function(){c=!1})),r({target:"Array",proto:!0,forced:c||!l},{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),s(i)},"7e12":function(t,e,o){var r=o("da84"),a=o("58a8").trim,s=o("5899"),n=r.parseFloat,i=1/n(s+"-0")!==-1/0;t.exports=i?function(t){var e=a(String(t)),o=n(e);return 0===o&&"-"==e.charAt(0)?-0:o}:n},"88ea":function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[t.showLoading?o("section",{staticClass:"loader"},[o("jump-loader",{staticClass:"icon",attrs:{where:"top"}})],1):o("section",{staticClass:"book-main"},[t.volumePanel.showChapterPanel?t._e():o("section",{staticClass:"book-main"},[o("head-top",{attrs:{"head-title":t.book.title,"go-back":!0,"goback-handler":t.onGoback.bind(null),"show-operator":!1,"is-transparent":!0}}),o("section",{staticClass:"book-detail-wrapper"},[o("img",{staticClass:"book-cover-blur",attrs:{src:t.book.cover_url,alt:t.book.title,"aria-hidden":"true"}}),o("section",{staticClass:"book-detail-info"},[o("div",{staticClass:"book-detail-layout"},[o("img",{staticClass:"book-cover book-layout-left",attrs:{src:t.book.cover_url,alt:t.book.title,"aria-labelledby":"ariaBook ariaTime"}}),o("div",{staticClass:"book-layout-right"},[o("header",{staticClass:"book-header"},[o("h6",[t._v(t._s(t.book.title))])]),o("p",{staticClass:"book-meta"},[o("span",{staticClass:"author-name"},[t._v(" "+t._s(t.book.author))]),o("span",{staticClass:"publisher-name"},[t._v(" "+t._s(t.book.publisher?"|"+t.book.publisher:"")+" ")])]),o("p",{staticClass:"book-meta"},[o("span",[t._v(t._s(this.total_words+"萬字|"))]),o("span",{class:{completed:"已完成"===t.book.book_status}},[t._v(t._s(t.book.book_status))])]),o("p",{staticClass:"book-meta"},[o("span",[t._v(t._s("最近更新:"+(t.book.last_updated_date?t.book.last_updated_date:"未有更新")))])])])]),o("div",{staticClass:"book-detail-btn"},[o("div",{staticClass:"btn-group"},[o("div",{staticClass:"btn",on:{click:t.goToChapter}},[t._v(" "+t._s(t.continueChapterId?"繼續閱讀":"開始閱讀")+" ")]),o("div",{staticClass:"btn",class:{inBookshelfColor:t.bookshelfStatus.isInBookshelf},on:{click:t.addToBookShelf}},[t._v(" "+t._s(t.bookshelfStatus.message)+" ")]),o("div",{staticClass:"btn"},[t._v("同步Kindle")])])])])]),o("section",{staticClass:"book-intro-wrapper",class:{showMore:t.isShowMore},on:{click:function(e){t.isShowMore=!t.isShowMore}}},[o("section",{staticClass:"book-summary enabled"},[o("div",[t._v(" "+t._s(t.book.introduction)+" ")]),o("span",{staticClass:"book-summary-more",class:{showMore:t.isShowMore}},[o("svg",{staticClass:"icon icon-arrow-r",attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[o("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#icon-arrow-r"}})])])])]),o("section",{staticClass:"latest-chapter-wrapper",on:{click:function(e){return t.$router.push({name:"reader",params:{bookid:t.bookid},query:{chapterid:t.lastChapter.id}})}}},[void 0!=t.lastChapter.volume_name?o("span",[t._v(t._s(t.lastChapter.volume_name+" "+t.lastChapter.chapter_name))]):o("span",[t._v("Loading...")]),o("span",[o("svg",{staticClass:"icon icon-arrow-r",attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[o("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#icon-arrow-r"}})])])]),o("section",{staticClass:"book-volume-list-wrapper"},[o("header",[o("h4",[t._v("全卷")]),o("div",[o("span",{staticClass:"order",class:{active:1===t.order},on:{click:function(e){return t.reorderVolumes(1)}}},[t._v("順序")]),o("span",{staticClass:"order",class:{active:-1===t.order},on:{click:function(e){return t.reorderVolumes(-1)}}},[t._v("倒序")])])])]),o("div",{ref:"wrapper",staticClass:"wrapper"},[o("ul",{staticClass:"book-volume-list-ul"},[t._l(t.book.volumes,(function(e){return o("li",{key:e.id,staticClass:"book-volume-list-li",on:{click:function(o){return t.getChaptersOfVolume(e)}}},[o("span",{staticClass:"icon-book-container"},[o("svg",{staticClass:"icon icon-book",attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[o("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#icon-book"}})])]),o("span",[t._v(t._s(e.name))])])})),o("li",{staticClass:"book-volume-list-li"})],2)])],1),t.volumePanel.showChapterPanel?o("chapter-list",{on:{goback:t.hidePanel}}):t._e()],1)])},a=[],s=(o("a4d3"),o("e01a"),o("d28b"),o("4de4"),o("7db0"),o("45fc"),o("b0c0"),o("a9e3"),o("c35a"),o("b680"),o("d3b7"),o("ac1f"),o("3ca3"),o("1276"),o("ddb0"),o("96cf"),o("1da1")),n=o("5530"),i=o("9c6c"),c=o("2f62"),l=o("f8c8"),u=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("head-top",{attrs:{"head-title":t.book.title,"is-transparent":!1}},[o("section",{staticClass:"fake-goback",attrs:{slot:"fake-goback"},on:{click:t.goback},slot:"fake-goback"},[o("svg",{attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[o("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#icon-arrow"}})])])]),t.currentVolumeChapters?o("section",{staticClass:"chapter-list"},[o("header",[o("h4",[t._v(t._s(t.currentVolumeChapters.name))])]),o("div",{ref:"wrapper",staticClass:"wrapper"},[o("ul",{staticClass:"chapter-list-ul"},[t._l(t.currentVolumeChapters.chapters,(function(e){return o("li",{key:e.id,staticClass:"chapter-list-li",on:{click:function(o){return t.$router.push("/reader/"+t.book.id+"?chapterid="+e.id)}}},[o("span",[t._v(t._s(e.chapter_name))])])})),o("li",{staticClass:"chapter-list-li"})],2)])]):t._e()],1)},h=[],f=(o("4160"),o("caad"),o("2532"),o("159b"),o("2909")),p=o("1fba"),d={name:"chapterList",data:function(){return{}},components:{headTop:i["a"]},computed:Object(n["a"])({},Object(c["c"])(["book","currentVolumeChapters"]),{sortedChapterList:function(){if(this.currentVolumeChapters.chapters){var t=Object(f["a"])(this.currentVolumeChapters.chapters),e={num:{"一":1,"二":2,"三":3,"四":4,"五":5,"六":6,"七":7,"八":8,"九":9,"十":10,"終":99999},unit:{"十":10,"百":100,"千":1e3}};return t.forEach((function(t){var o=1;for(var r in e.unit)if(t.chapter_name.includes(r)){o*=e.unit[r];break}for(var a in e.num)if(t.chapter_name.includes(a)){o+=e.num[a];break}t=Object.assign(t,{oid:o})})),t.sort((function(t,e){return t.chapter_name.localeCompare(e.chapter_name,"zh-CN")})),t}return[]}}),mounted:function(){var t=this;this.$nextTick((function(){if(!t.scroll){var e={scrollY:!0,scrollX:!1,mouseWheel:!0,click:!0,taps:!0};t.scroll=new p["a"](t.$refs.wrapper,e),window.scroll(0,0)}}))},methods:{goback:function(){this.$emit("goback")}}},b=d,k=(o("938c"),o("2877")),v=Object(k["a"])(b,u,h,!1,null,"23b04639",null),m=v.exports,w=o("cf45"),g=o("c773"),C=o("51be"),_={name:"Book",created:function(){this.bookid=parseInt(this.$route.params.bookid)},mounted:function(){this.initData(),this.book&&this.book.volumes&&this.createScroll()},data:function(){return{from:null,bookid:null,isShowMore:!1,order:1,bookshelfStatus:{isInBookshelf:!1,message:"加入書櫃"},volumePanel:{showChapterPanel:!1,chapterList:[],currentVolumeChapters:{}}}},beforeRouteEnter:function(t,e,o){o((function(t){t.from=e}))},beforeDestroy:function(){this.saveBook(null)},components:{ChapterList:m,headTop:i["a"],jumpLoader:g["a"]},methods:Object(n["a"])({createScroll:function(){var t=this;this.$nextTick((function(){if(!t.scroll){var e={scrollY:!0,scrollX:!1,mouseWheel:!0,click:!0,taps:!0};t.scroll=new p["a"](t.$refs.wrapper,e)}}))},goToChapter:function(){var t=this.continueChapterId?this.continueChapterId:this.firstChapter.id;this.$router.push({name:"reader",params:{bookid:this.bookid},query:{chapterid:t}})}},Object(c["b"])(["saveBook","loadBookshelfList","initChapterList","saveBookToBookshelf","saveCurrentVolumeChapters"]),{hidePanel:function(){this.volumePanel.showChapterPanel=!this.volumePanel.showChapterPanel},getChaptersOfVolume:function(t){if(!Object(w["b"])(this.volumePanel.chapterList)){var e=this.volumePanel.chapterList.filter((function(e){return e.id===t.id}))[0];this.saveCurrentVolumeChapters(e),this.volumePanel.showChapterPanel=!0}},initData:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!Object(w["b"])(t.book)){e.next=11;break}return e.next=3,Object(l["a"])(t.bookid);case 3:if(o=e.sent,!Object(w["b"])(o.response)&&!o.response.message){e.next=8;break}return e.next=7,t.$router.push("/home");case 7:return e.abrupt("return");case 8:o=Object(n["a"])({},o.response),o.cover_url="".concat(C["b"],"/image/")+o.cover_url.split("/").pop(),t.saveBook(o);case 11:if(t.initChapterList(t.book),!Object(w["b"])(t.bookshelfList)){e.next=15;break}return e.next=15,t.loadBookshelfList();case 15:r=t.bookshelfList.some((function(e){return e.id===t.bookid})),t.bookshelfStatus=r?{isInBookshelf:!0,message:"已加入書櫃"}:{isInBookshelf:!1,message:"加入書櫃"};case 17:case"end":return e.stop()}}),e)})))()},reorderVolumes:function(t){if(t!==this.order){this.order=t;var e=Object.assign({},this.book);e.volumes=e.volumes.reverse(),this.saveBook(e)}},addToBookShelf:function(){this.saveBookToBookshelf(this.book)},onGoback:function(){this.from.query?this.$router.push({name:"home",query:this.from.query}):this.$router.push({name:"home"})}}),watch:{isShowMore:function(t){var e=!0,o=!1,r=void 0;try{for(var a,s=document.getElementsByClassName("book-main")[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){var n=a.value;n.style.height=t?"auto":"100%"}}catch(i){o=!0,r=i}finally{try{e||null==s.return||s.return()}finally{if(o)throw r}}},chapterList:function(t){this.volumePanel.chapterList=t},bookshelfList:function(t){var e=this;this.$nextTick((function(){var o=t.some((function(t){return t.id===e.bookid}));e.bookshelfStatus.isInBookshelf=o,e.bookshelfStatus.message=o?"已加入書櫃":"加入書櫃"}))},book:function(t){Object(w["b"])(t)||this.createScroll()}},computed:Object(n["a"])({bookshelfList:function(){return this.$store.getters.bookshelfList||[]}},Object(c["c"])(["book","recentReadingChapterList","chapterList"]),{continueChapterId:function(){var t=this,e=this.recentReadingChapterList.find((function(e){return e.bookid===t.bookid}));return Object(w["b"])(e)?null:e.chapterid},firstChapter:function(){return this.volumePanel.chapterList[0].chapters[0]},lastChapter:function(){if(!Object(w["b"])(this.volumePanel.chapterList)){var t=this.volumePanel.chapterList[this.volumePanel.chapterList.length-1];return Object(n["a"])({},{volume_name:t.name},{},t.chapters[t.chapters.length-1])}return"Loading ..."},showLoading:function(){return!!Object(w["b"])(this.book)},total_words:function(){return this.book.word_count?this.book.word_count<1e4?this.book.word_count:Number.parseFloat(this.book.word_count/1e4).toFixed(1):"未知幾多"}})},x=_,y=(o("11c0"),Object(k["a"])(x,r,a,!1,null,"fc23521c",null));e["default"]=y.exports},"938c":function(t,e,o){"use strict";var r=o("39f1"),a=o.n(r);a.a},a9e3:function(t,e,o){"use strict";var r=o("83ab"),a=o("da84"),s=o("94ca"),n=o("6eeb"),i=o("5135"),c=o("c6b6"),l=o("7156"),u=o("c04e"),h=o("d039"),f=o("7c73"),p=o("241c").f,d=o("06cf").f,b=o("9bf2").f,k=o("58a8").trim,v="Number",m=a[v],w=m.prototype,g=c(f(w))==v,C=function(t){var e,o,r,a,s,n,i,c,l=u(t,!1);if("string"==typeof l&&l.length>2)if(l=k(l),e=l.charCodeAt(0),43===e||45===e){if(o=l.charCodeAt(2),88===o||120===o)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+l}for(s=l.slice(2),n=s.length,i=0;i<n;i++)if(c=s.charCodeAt(i),c<48||c>a)return NaN;return parseInt(s,r)}return+l};if(s(v,!m(" 0o1")||!m("0b1")||m("+0x1"))){for(var _,x=function(t){var e=arguments.length<1?0:t,o=this;return o instanceof x&&(g?h((function(){w.valueOf.call(o)})):c(o)!=v)?l(new m(C(e)),o,x):C(e)},y=r?p(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;y.length>S;S++)i(m,_=y[S])&&!i(x,_)&&b(x,_,d(m,_));x.prototype=w,w.constructor=x,n(a,v,x)}},ab13:function(t,e,o){var r=o("b622"),a=r("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(o){try{return e[a]=!1,"/./"[t](e)}catch(r){}}return!1}},b0c0:function(t,e,o){var r=o("83ab"),a=o("9bf2").f,s=Function.prototype,n=s.toString,i=/^\s*function ([^ (]*)/,c="name";!r||c in s||a(s,c,{configurable:!0,get:function(){try{return n.call(this).match(i)[1]}catch(t){return""}}})},b680:function(t,e,o){"use strict";var r=o("23e7"),a=o("a691"),s=o("408a"),n=o("1148"),i=o("d039"),c=1..toFixed,l=Math.floor,u=function(t,e,o){return 0===e?o:e%2===1?u(t,e-1,o*t):u(t*t,e/2,o)},h=function(t){var e=0,o=t;while(o>=4096)e+=12,o/=4096;while(o>=2)e+=1,o/=2;return e},f=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!i((function(){c.call({})}));r({target:"Number",proto:!0,forced:f},{toFixed:function(t){var e,o,r,i,c=s(this),f=a(t),p=[0,0,0,0,0,0],d="",b="0",k=function(t,e){var o=-1,r=e;while(++o<6)r+=t*p[o],p[o]=r%1e7,r=l(r/1e7)},v=function(t){var e=6,o=0;while(--e>=0)o+=p[e],p[e]=l(o/t),o=o%t*1e7},m=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==p[t]){var o=String(p[t]);e=""===e?o:e+n.call("0",7-o.length)+o}return e};if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(d="-",c=-c),c>1e-21)if(e=h(c*u(2,69,1))-69,o=e<0?c*u(2,-e,1):c/u(2,e,1),o*=4503599627370496,e=52-e,e>0){k(0,o),r=f;while(r>=7)k(1e7,0),r-=7;k(u(10,r,1),0),r=e-1;while(r>=23)v(1<<23),r-=23;v(1<<r),k(1,1),v(2),b=m()}else k(0,o),k(1<<-e,0),b=m()+n.call("0",f);return f>0?(i=b.length,b=d+(i<=f?"0."+n.call("0",f-i)+b:b.slice(0,i-f)+"."+b.slice(i-f))):b=d+b,b}})},c35a:function(t,e,o){var r=o("23e7"),a=o("7e12");r({target:"Number",stat:!0,forced:Number.parseFloat!=a},{parseFloat:a})},c773:function(t,e,o){"use strict";var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"load_img",style:{bottom:this.position}})])},a=[],s={data:function(){return{}},props:{where:{type:String,default:"bottom"}},mounted:function(){},computed:{position:function(){var t="";switch(this.where){case"bottom":t="5%";break;case"center":t="50%";break;case"top":t="75%";break;default:t="5%"}return t}},beforeDestroy:function(){}},n=s,i=(o("1afe"),o("2877")),c=Object(i["a"])(n,r,a,!1,null,"696dacde",null);e["a"]=c.exports},caad:function(t,e,o){"use strict";var r=o("23e7"),a=o("4d64").includes,s=o("44d2"),n=o("ae40"),i=n("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:!i},{includes:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),s("includes")},ecf4:function(t,e,o){}}]);