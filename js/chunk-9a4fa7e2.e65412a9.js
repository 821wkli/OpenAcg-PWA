(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9a4fa7e2"],{"498a":function(t,e,s){"use strict";var r=s("23e7"),i=s("58a8").trim,n=s("c8d2");r({target:"String",proto:!0,forced:n("trim")},{trim:function(){return i(this)}})},"54fe":function(t,e,s){"use strict";var r=s("ba06"),i=s.n(r);i.a},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,s){var r=s("1d80"),i=s("5899"),n="["+i+"]",c=RegExp("^"+n+n+"*"),a=RegExp(n+n+"*$"),o=function(t){return function(e){var s=String(r(e));return 1&t&&(s=s.replace(c,"")),2&t&&(s=s.replace(a,"")),s}};t.exports={start:o(1),end:o(2),trim:o(3)}},"855b":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("search-bar",{staticClass:"search-bar",attrs:{placeholder:t.showPlaceHolder?t.hottestBook:"","cancel-text":"取消"},on:{cancel:t.onCancel,search:t.onSearch,clear:t.onClear,doFocus:t.onFocus,doBlur:t.onBlur,input:t.triggerAutoComplete},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}}),t.isSearching?s("section",{staticClass:"search-keywords-container"},[s("ul",{staticClass:"search-keywords-list"},t._l(t.fuzzingKeywords,(function(e,r){return s("li",{key:r,staticClass:"item",on:{click:function(s){t.saveSearchHistory({title:e})&&t.$router.push({name:"home",query:{keyword:e}})}}},[s("span",{staticClass:"title"},[t._v(t._s(e))])])})),0)]):s("section",[t._v("` "),s("section",{staticClass:"recommendation-container"},[t._m(0),s("div",{staticClass:"hot-items"},t._l(t.hotList,(function(e,r){return s("div",{key:r,staticClass:"item",on:{click:function(s){return t.goToBook(e)}}},[s("p",[t._v(t._s(e.title))])])})),0)]),s("div",{staticClass:"line",staticStyle:{background:"#f4f4f4",height:".5rem"}}),s("section",{staticClass:"search-history-container"},[s("header",{staticClass:"history-title"},[s("p",[t._v(t._s(t.$lang.common.searchHistory))]),s("p",{staticStyle:{color:"blue"},on:{click:this.cleanSearchHistory}},[t._v(t._s(t.$lang.common.clearHistory))])]),s("ul",{staticClass:"history-list"},t._l(t.reversedSearchHistoryList,(function(e,r){return s("li",{key:r,staticClass:"item",on:{click:function(s){return t.$router.push({name:"home",query:{keyword:e.title}})}}},[t._m(1,!0),s("span",{staticClass:"title"},[t._v(t._s(e.title))])])})),0)])])],1)},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",[s("p",[t._v("大家都在搜")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon"},[s("img",{attrs:{src:"//s1.hdslb.com/bfs/static/mult/images/history.png",alt:""}})])}],n=(s("498a"),s("2909")),c=s("5530"),a=s("9fef"),o=s("2f62"),l=s("cf45"),u=s("f8c8"),h={name:"search",data:function(){return{searchText:"",showPlaceHolder:!0,fuzzingKeywords:[],offset:0}},computed:Object(c["a"])({},Object(o["c"])(["hotList","searchHistory"]),{reversedSearchHistoryList:function(){return Object(l["d"])(this.searchHistory)?[]:Object(n["a"])(this.searchHistory).reverse()},hottestBook:function(){return Object(l["d"])(this.hotList)?"":this.hotList[Math.floor(Math.random()*this.hotList.length)].title},isSearching:function(){return this.searchText.trim().length>0}}),created:function(){this.saveLatestBookList([]),this.saveHomeScrollingPosY(0),Object(l["d"])(this.searchHistory)&&this.initSearchHistory()},methods:Object(c["a"])({},Object(o["b"])(["initSearchHistory","saveHomeScrollingPosY","saveSearchHistory","cleanSearchHistory","saveLatestBookList"]),{goToBook:function(t){this.saveSearchHistory({title:t.title}),this.$router.push({name:"book",params:{bookid:t.id}})},onSearch:function(){""!==this.searchText.trim()&&(this.saveSearchHistory({title:this.searchText}),this.$router.push({name:"home",query:{keyword:this.searchText}}))},triggerAutoComplete:function(){var t=this;setTimeout((function(){t.searchText.trim().length>0&&Object(u["g"])(t.searchText).then((function(e){Object(l["d"])(e.response)||(t.fuzzingKeywords=e.response)}))}),500)},onCancel:function(){this.$router.go(-1)},onClear:function(){this.searchText=""},onFocus:function(){this.showPlaceHolder=!1},onBlur:function(){this.showPlaceHolder=!0}}),components:{SearchBar:a["a"]}},f=h,d=(s("54fe"),s("2877")),m=Object(d["a"])(f,r,i,!1,null,"b21f9be6",null);e["default"]=m.exports},"9fef":function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"search-bar"},[s("div",{staticClass:"search-box"},[s("svg",{staticClass:"search-icon",attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[s("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#icon-search"}})]),s("input",{staticClass:"search-input",style:{borderRadius:"round"===t.shape?".512rem":".17067rem"},attrs:{type:"search",autocomplete:"off",placeholder:t.placeholder},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)},focus:t.doFocus,blur:t.doBlur,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}}}),s("i",{directives:[{name:"show",rawName:"v-show",value:t.showClearIcon,expression:"showClearIcon"}],staticClass:"clear-icon",on:{click:t.clearText}})]),s("div",{staticClass:"search-cancel",on:{click:t.cancel}},[s("p",[t._v(t._s(t.cancelText))])])])])},i=[],n={name:"searchBar",computed:{showClearIcon:function(){return""!==this.value&&void 0!==this.value}},methods:{doFocus:function(){this.$emit("doFocus")},doBlur:function(){this.$emit("doBlur")},search:function(){this.$emit("search")},cancel:function(){this.$emit("cancel")},clearText:function(){this.$emit("clear")}},props:{value:{type:String},cancelText:{type:String},background:{type:String,default:"#f2f2f2"},shape:{type:String,default:"round"},placeholder:{tyoe:String,default:"Input text here"},inputAlign:{type:String,default:"left"}}},c=n,a=(s("bec5"),s("2877")),o=Object(a["a"])(c,r,i,!1,null,"30e4f248",null);e["a"]=o.exports},a52d:function(t,e,s){},ba06:function(t,e,s){},bec5:function(t,e,s){"use strict";var r=s("a52d"),i=s.n(r);i.a},c8d2:function(t,e,s){var r=s("d039"),i=s("5899"),n="​᠎";t.exports=function(t){return r((function(){return!!i[t]()||n[t]()!=n||i[t].name!==t}))}}}]);