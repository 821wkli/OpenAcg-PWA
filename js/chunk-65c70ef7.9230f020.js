(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65c70ef7"],{"1afe":function(t,e,o){"use strict";var s=o("3cec"),a=o.n(s);a.a},"31b7":function(t,e,o){},"39f1":function(t,e,o){},"3cec":function(t,e,o){},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,o){var s=o("1d80"),a=o("5899"),r="["+a+"]",n=RegExp("^"+r+r+"*"),i=RegExp(r+r+"*$"),c=function(t){return function(e){var o=String(s(e));return 1&t&&(o=o.replace(n,"")),2&t&&(o=o.replace(i,"")),o}};t.exports={start:c(1),end:c(2),trim:c(3)}},7156:function(t,e,o){var s=o("861d"),a=o("d2bb");t.exports=function(t,e,o){var r,n;return a&&"function"==typeof(r=e.constructor)&&r!==o&&s(n=r.prototype)&&n!==o.prototype&&a(t,n),t}},"7db0":function(t,e,o){"use strict";var s=o("23e7"),a=o("b727").find,r=o("44d2"),n=o("ae40"),i="find",c=!0,l=n(i);i in[]&&Array(1)[i]((function(){c=!1})),s({target:"Array",proto:!0,forced:c||!l},{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),r(i)},"7e12":function(t,e,o){var s=o("da84"),a=o("58a8").trim,r=o("5899"),n=s.parseFloat,i=1/n(r+"-0")!==-1/0;t.exports=i?function(t){var e=a(String(t)),o=n(e);return 0===o&&"-"==e.charAt(0)?-0:o}:n},"88ea":function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[t.showLoading?o("section",{staticClass:"loader"},[o("jump-loader",{staticClass:"icon",attrs:{where:"top"}})],1):o("section",{staticClass:"book-main"},[o("section",{staticClass:"book-main"},[o("head-top",{attrs:{"head-title":t.book.title,"go-back":!0,"goback-handler":t.onGoback.bind(null),"show-operator":!1,"is-transparent":!0}},[o("section",{staticClass:"icon share",attrs:{slot:"share"},on:{click:function(e){t.showShareBox=!t.showShareBox}},slot:"share"},[o("svg",{attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[o("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#icon-share"}})])])]),o("section",{staticClass:"book-detail-wrapper"},[o("img",{staticClass:"book-cover-blur",attrs:{src:t.book.cover_url,alt:t.book.title,"aria-hidden":"true"}}),o("section",{staticClass:"book-detail-info"},[o("div",{staticClass:"book-detail-layout"},[o("img",{staticClass:"book-cover book-layout-left",attrs:{src:t.book.cover_url,alt:t.book.title,"aria-labelledby":"ariaBook ariaTime"}}),o("div",{staticClass:"book-layout-right"},[o("header",{staticClass:"book-header"},[o("h6",[t._v(t._s(t.book.title))])]),o("p",{staticClass:"book-meta"},[o("span",{staticClass:"author-name"},[t._v(" "+t._s(t.book.author))]),o("span",{staticClass:"publisher-name"},[t._v(" "+t._s(t.book.publisher?"|"+t.book.publisher:"")+" ")])]),o("p",{staticClass:"book-meta"},[o("span",[t._v(t._s(this.total_words+"萬字|"))]),o("span",{class:{completed:"已完成"===t.book.book_status}},[t._v(t._s(t.book.book_status))])]),o("p",{staticClass:"book-meta"},[o("span",[t._v(t._s("最近更新:"+(t.book.last_updated_date?t.book.last_updated_date:"未有更新")))])])])]),o("div",{staticClass:"book-detail-btn"},[o("div",{staticClass:"btn-group"},[o("div",{staticClass:"btn",on:{click:t.goToChapter}},[t._v(" "+t._s(t.continueChapterId?"繼續閱讀":"開始閱讀")+" ")]),o("div",{staticClass:"btn",class:{inBookshelfColor:t.bookshelfStatus.isInBookshelf},on:{click:t.addToBookShelf}},[t._v(" "+t._s(t.bookshelfStatus.message)+" ")]),o("div",{staticClass:"btn"},[t._v("同步Kindle")])])])])]),o("section",{staticClass:"book-intro-wrapper",class:{showMore:t.isShowMore},on:{click:function(e){t.isShowMore=!t.isShowMore}}},[o("section",{staticClass:"book-summary enabled"},[o("div",{staticClass:"content",class:{showMore:t.isShowMore}},[t._v(" "+t._s(""!==t.book.introduction.trim()?t.book.introduction:t.$lang.bookPage.copyRightMessage)+" ")]),o("span",{staticClass:"book-summary-more",class:{showMore:t.isShowMore}},[o("svg",{staticClass:"icon icon-arrow-r",attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[o("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#icon-arrow-r"}})])])])]),o("section",{staticClass:"latest-chapter-wrapper",on:{click:function(e){return t.$router.push({name:"reader",params:{bookid:t.bookid},query:{chapterid:t.lastChapter.id}})}}},[void 0!=t.lastChapter.volume_name?o("span",[t._v(t._s(t.lastChapter.volume_name+" "+t.lastChapter.chapter_name))]):o("span",[t._v("Loading...")]),o("span",[o("svg",{staticClass:"icon icon-arrow-r",attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[o("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#icon-arrow-r"}})])])]),o("section",{staticClass:"book-volume-list-wrapper"},[o("header",[o("h4",[t._v("全卷")]),o("div",[o("span",{staticClass:"order",class:{active:1===t.order},on:{click:function(e){return t.reorderVolumes(1)}}},[t._v("順序")]),o("span",{staticClass:"order",class:{active:-1===t.order},on:{click:function(e){return t.reorderVolumes(-1)}}},[t._v("倒序")])])])]),o("div",{ref:"wrapper",staticClass:"wrapper"},[o("ul",{staticClass:"book-volume-list-ul"},[t._l(t.book.volumes,(function(e){return o("li",{key:e.id,staticClass:"book-volume-list-li",on:{click:function(o){return t.getChaptersOfVolume(e)}}},[o("span",{staticClass:"icon-book-container"},[o("svg",{staticClass:"icon icon-book",attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[o("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#icon-book"}})])]),o("span",[t._v(t._s(e.name))])])})),o("li",{staticClass:"book-volume-list-li"})],2)])],1),t.volumePanel.showChapterPanel?o("chapter-list",{on:{goback:t.hidePanel}}):t._e()],1),o("section",{directives:[{name:"show",rawName:"v-show",value:t.showShareBox,expression:"showShareBox"}],staticClass:"share-box-mask",on:{click:function(e){e.stopPropagation(),t.showShareBox=!1}}},[o("share-box",{attrs:{book:this.book},on:{onClose:function(e){t.showShareBox=!1}}})],1)])},a=[],r=(o("4de4"),o("7db0"),o("c975"),o("45fc"),o("b0c0"),o("a9e3"),o("c35a"),o("b680"),o("ac1f"),o("5319"),o("1276"),o("96cf"),o("1da1")),n=o("5530"),i=o("9c6c"),c=o("2f62"),l=o("f8c8"),h=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("head-top",{attrs:{"head-title":t.book.title,"is-transparent":!1}},[o("section",{staticClass:"fake-goback",attrs:{slot:"fake-goback"},on:{click:t.goback},slot:"fake-goback"},[o("svg",{attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[o("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#icon-arrow"}})])])]),t.currentVolumeChapters?o("section",{staticClass:"chapter-list"},[o("header",[o("h4",[t._v(t._s(t.currentVolumeChapters.name))])]),o("div",{ref:"wrapper",staticClass:"wrapper"},[o("ul",{staticClass:"chapter-list-ul"},[t._l(t.currentVolumeChapters.chapters,(function(e){return o("li",{key:e.id,staticClass:"chapter-list-li",on:{click:function(o){return t.$router.push("/reader/"+t.book.id+"?chapterid="+e.id)}}},[o("span",[t._v(t._s(e.chapter_name))])])})),o("li",{staticClass:"chapter-list-li"})],2)])]):t._e()],1)},u=[],p=(o("4160"),o("caad"),o("2532"),o("159b"),o("2909")),f=o("1fba"),d={name:"chapterList",data:function(){return{}},components:{headTop:i["a"]},computed:Object(n["a"])(Object(n["a"])({},Object(c["c"])(["book","currentVolumeChapters"])),{},{sortedChapterList:function(){if(this.currentVolumeChapters.chapters){var t=Object(p["a"])(this.currentVolumeChapters.chapters),e={num:{"一":1,"二":2,"三":3,"四":4,"五":5,"六":6,"七":7,"八":8,"九":9,"十":10,"終":99999},unit:{"十":10,"百":100,"千":1e3}};return t.forEach((function(t){var o=1;for(var s in e.unit)if(t.chapter_name.includes(s)){o*=e.unit[s];break}for(var a in e.num)if(t.chapter_name.includes(a)){o+=e.num[a];break}t=Object.assign(t,{oid:o})})),t.sort((function(t,e){return t.chapter_name.localeCompare(e.chapter_name,"zh-CN")})),t}return[]}}),mounted:function(){var t=this;this.$nextTick((function(){if(!t.scroll){var e={scrollY:!0,scrollX:!1,mouseWheel:!0,click:!0,taps:!0};t.scroll=new f["a"](t.$refs.wrapper,e),window.scroll(0,0)}}))},methods:{goback:function(){this.$emit("goback")}}},b=d,k=(o("938c"),o("2877")),w=Object(k["a"])(b,h,u,!1,null,"23b04639",null),m=w.exports,v=o("cf45"),g=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"load_img",style:{bottom:this.position}})])},C=[],x={data:function(){return{}},props:{where:{type:String,default:"bottom"}},mounted:function(){},computed:{position:function(){var t="";switch(this.where){case"bottom":t="5%";break;case"center":t="50%";break;case"top":t="75%";break;default:t="5%"}return t}},beforeDestroy:function(){}},_=x,O=(o("1afe"),Object(k["a"])(_,g,C,!1,null,"696dacde",null)),y=O.exports,S=o("51be"),j=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"share-box"},[o("header",[o("span",{staticClass:"left"},[t._v("分享小說")]),o("span",{staticClass:"right icon",on:{click:function(e){return e.stopPropagation(),t.onClose(e)}}},[o("svg",{attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[o("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#icon-close"}})])])]),o("section",{staticClass:"content"},[o("div",{staticClass:"content-box-wrapper"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.shareDescription,expression:"shareDescription"}],ref:"contentBox",staticClass:"content-box",attrs:{readonly:""},domProps:{value:t.shareDescription},on:{input:function(e){e.target.composing||(t.shareDescription=e.target.value)}}})]),o("div",{staticClass:"share-icons"},[o("span",{staticClass:"icon copy",on:{click:function(e){return e.stopPropagation(),t.copy(e)}}},[o("svg",{attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[o("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#icon-copy"}})])]),o("a",{staticClass:"icon telegram",attrs:{href:t.shareToSocialMedia("telegram"),rel:"noopener noreferrer",target:"_blank"}},[o("svg",{attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[o("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#icon-telegram"}})])]),o("a",{staticClass:"icon twitter",attrs:{href:t.shareToSocialMedia("twitter"),rel:"noopener noreferrer",target:"_blank"}},[o("svg",{attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[o("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#icon-twitter"}})])]),o("a",{staticClass:"icon facebook",attrs:{href:t.shareToSocialMedia("facebook"),rel:"noopener noreferrer",target:"_blank"}},[o("svg",{attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[o("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#icon-facebook"}})])]),o("a",{staticClass:"icon whatsapp",attrs:{href:t.shareToSocialMedia("whatsapp"),rel:"noopener noreferrer",target:"_blank"}},[o("svg",{attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[o("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#icon-whatsapp"}})])])])])])},L=[],$=(o("99af"),{name:"shareBox",props:{book:{type:Object}},computed:Object(n["a"])({shareDescription:function(){var t="- 分享自 OpenAcg\n".concat(this.$hostURL+this.$route.fullPath);return Object(v["d"])(this.book)?"Loading ...":"".concat(this.book.title,"\n").concat(this.book.author,"|").concat(this.book.publisher,"\n").concat(this.book.introduction,"\n").concat(t)}},Object(c["c"])(["system"])),methods:{onClose:function(){this.$emit("onClose")},copy:function(){var t=this.$refs.contentBox;try{if("IOS"===this.system){var e=t.readOnly,o=t.contentEditable,s=document.createRange();t.readOnly=!1,t.contentEditable="true",s.selectNodeContents(t);var a=window.getSelection();a.removeAllRanges(),a.addRange(s),t.setSelectionRange(0,9999),t.contentEditable=o,t.readOnly=e}t.select(),document.execCommand("copy"),t.blur(),this.$toast.center(this.$lang.common.copySucess)}catch(r){this.$toast.center(this.$lang.common.copyFailed)}},shareToSocialMedia:function(t){var e="";if(null!==this.book){var o=encodeURIComponent("".concat(this.book.title,"\n- 分享自 OpenAcg\n").concat(this.$hostURL+this.$route.fullPath)),s="tg://msg_url?text=",a="whatsapp://send?text=",r="https://twitter.com/intent/tweet?text=",n='href="https://www.facebook.com/sharer/sharer.php?u="';switch(t){case"telegram":e=s+o;break;case"whatsapp":e=a+o;break;case"twitter":e=r+o;break;case"facebook":e=n+this.$hostURL+this.$route.fullPath;break;default:e="#"}}return e}}}),B=$,I=(o("b1e3"),Object(k["a"])(B,j,L,!1,null,"95a533da",null)),P=I.exports,N={name:"Book",created:function(){this.bookid=parseInt(this.$route.params.bookid)},mounted:function(){this.initData(),this.book&&this.book.volumes&&this.createScroll()},data:function(){return{from:null,bookid:null,isShowMore:!1,order:1,showShareBox:!1,bookshelfStatus:{isInBookshelf:!1,message:"加入書櫃"},volumePanel:{showChapterPanel:!1,chapterList:[],currentVolumeChapters:{}}}},beforeRouteEnter:function(t,e,o){o((function(t){t.from=e}))},beforeDestroy:function(){this.saveBook(null)},components:{ShareBox:P,ChapterList:m,headTop:i["a"],jumpLoader:y},methods:Object(n["a"])(Object(n["a"])({createScroll:function(){var t=this;this.$nextTick((function(){if(!t.scroll){var e={scrollY:!0,scrollX:!1,mouseWheel:!0,click:!0,taps:!0};t.scroll=new f["a"](t.$refs.wrapper,e)}}))},goToChapter:function(){var t=this.continueChapterId?this.continueChapterId:this.firstChapter.id;this.$router.push({name:"reader",params:{bookid:this.bookid},query:{chapterid:t}})}},Object(c["b"])(["saveBook","loadBookshelfList","initChapterList","saveBookToBookshelf","saveCurrentVolumeChapters"])),{},{hidePanel:function(){this.volumePanel.showChapterPanel=!this.volumePanel.showChapterPanel},getChaptersOfVolume:function(t){if(!Object(v["d"])(this.volumePanel.chapterList)){var e=this.volumePanel.chapterList.filter((function(e){return e.id===t.id}))[0];this.saveCurrentVolumeChapters(e),this.volumePanel.showChapterPanel=!0}},initData:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!Object(v["d"])(t.book)){e.next=11;break}return e.next=3,Object(l["d"])(t.bookid);case 3:if(o=e.sent,!Object(v["d"])(o.response)&&!o.response.message){e.next=8;break}return e.next=7,t.$router.replace("/404");case 7:return e.abrupt("return");case 8:o=Object(n["a"])({},o.response),o.cover_url="".concat(S["b"],"/image/")+o.cover_url.split("/").pop(),t.saveBook(o);case 11:if(t.initChapterList(t.book),!Object(v["d"])(t.bookshelfList)){e.next=15;break}return e.next=15,t.loadBookshelfList();case 15:s=t.bookshelfList.some((function(e){return e.id===t.bookid})),t.bookshelfStatus=s?{isInBookshelf:!0,message:"已加入書櫃"}:{isInBookshelf:!1,message:"加入書櫃"};case 17:case"end":return e.stop()}}),e)})))()},reorderVolumes:function(t){if(t!==this.order){this.order=t;var e=Object.assign({},this.book);e.volumes=e.volumes.reverse(),this.saveBook(e)}},addToBookShelf:function(){this.saveBookToBookshelf(this.book)},onGoback:function(){Object(v["d"])(this.from.query)||"chapterid"in this.from.query!==!1?-1!==this.from.path.indexOf("bookshelf")?this.$router.go(-1):this.$router.push({name:"home"}):this.$router.push({name:"home",query:this.from.query})}}),watch:{chapterList:function(t){this.volumePanel.chapterList=t},bookshelfList:function(t){var e=this;this.$nextTick((function(){var o=t.some((function(t){return t.id===e.bookid}));e.bookshelfStatus.isInBookshelf=o,e.bookshelfStatus.message=o?"已加入書櫃":"加入書櫃"}))},book:function(t){Object(v["d"])(t)||this.createScroll()}},computed:Object(n["a"])(Object(n["a"])({bookshelfList:function(){return this.$store.getters.bookshelfList||[]}},Object(c["c"])(["book","recentReadingChapterList","chapterList","system"])),{},{continueChapterId:function(){var t=this,e=this.recentReadingChapterList.find((function(e){return e.bookid===t.bookid}));return Object(v["d"])(e)?null:e.chapterid},firstChapter:function(){return this.volumePanel.chapterList[0].chapters[0]},lastChapter:function(){if(!Object(v["d"])(this.volumePanel.chapterList)){var t=this.volumePanel.chapterList[this.volumePanel.chapterList.length-1];return Object(n["a"])(Object(n["a"])({},{volume_name:t.name}),t.chapters[t.chapters.length-1])}return"Loading ..."},showLoading:function(){return!!Object(v["d"])(this.book)},total_words:function(){return this.book.word_count?this.book.word_count<1e4?this.book.word_count:Number.parseFloat(this.book.word_count/1e4).toFixed(1):this.$lang.bookPage.unknownNumber}})},E=N,T=(o("e1e5"),Object(k["a"])(E,s,a,!1,null,"323f90cc",null));e["default"]=T.exports},"938c":function(t,e,o){"use strict";var s=o("39f1"),a=o.n(s);a.a},a9e3:function(t,e,o){"use strict";var s=o("83ab"),a=o("da84"),r=o("94ca"),n=o("6eeb"),i=o("5135"),c=o("c6b6"),l=o("7156"),h=o("c04e"),u=o("d039"),p=o("7c73"),f=o("241c").f,d=o("06cf").f,b=o("9bf2").f,k=o("58a8").trim,w="Number",m=a[w],v=m.prototype,g=c(p(v))==w,C=function(t){var e,o,s,a,r,n,i,c,l=h(t,!1);if("string"==typeof l&&l.length>2)if(l=k(l),e=l.charCodeAt(0),43===e||45===e){if(o=l.charCodeAt(2),88===o||120===o)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:s=2,a=49;break;case 79:case 111:s=8,a=55;break;default:return+l}for(r=l.slice(2),n=r.length,i=0;i<n;i++)if(c=r.charCodeAt(i),c<48||c>a)return NaN;return parseInt(r,s)}return+l};if(r(w,!m(" 0o1")||!m("0b1")||m("+0x1"))){for(var x,_=function(t){var e=arguments.length<1?0:t,o=this;return o instanceof _&&(g?u((function(){v.valueOf.call(o)})):c(o)!=w)?l(new m(C(e)),o,_):C(e)},O=s?f(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),y=0;O.length>y;y++)i(m,x=O[y])&&!i(_,x)&&b(_,x,d(m,x));_.prototype=v,v.constructor=_,n(a,w,_)}},b1e3:function(t,e,o){"use strict";var s=o("31b7"),a=o.n(s);a.a},c35a:function(t,e,o){var s=o("23e7"),a=o("7e12");s({target:"Number",stat:!0,forced:Number.parseFloat!=a},{parseFloat:a})},c975:function(t,e,o){"use strict";var s=o("23e7"),a=o("4d64").indexOf,r=o("a640"),n=o("ae40"),i=[].indexOf,c=!!i&&1/[1].indexOf(1,-0)<0,l=r("indexOf"),h=n("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:c||!l||!h},{indexOf:function(t){return c?i.apply(this,arguments)||0:a(this,t,arguments.length>1?arguments[1]:void 0)}})},d086:function(t,e,o){},e1e5:function(t,e,o){"use strict";var s=o("d086"),a=o.n(s);a.a}}]);