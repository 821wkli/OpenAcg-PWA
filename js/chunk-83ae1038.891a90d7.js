(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-83ae1038"],{"19f4":function(t,e,o){"use strict";var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"pokeball"}})},a=[],i={name:"pokeBall",props:{where:{type:String,default:"bottom"}},computed:{position:function(){var t="";switch(this.where){case"bottom":t="5%";break;case"center":t="50%";break;case"top":t="75%";break;default:t="5%"}return t}}},n=i,r=(o("8a07"),o("2877")),l=Object(r["a"])(n,s,a,!1,null,"604eca78",null);e["a"]=l.exports},"1e32":function(t,e,o){},"3ad3":function(t,e,o){},"46be":function(t,e,o){},"498a":function(t,e,o){"use strict";var s=o("23e7"),a=o("58a8").trim,i=o("c8d2");s({target:"String",proto:!0,forced:i("trim")},{trim:function(){return a(this)}})},5319:function(t,e,o){"use strict";var s=o("d784"),a=o("825a"),i=o("7b0b"),n=o("50c4"),r=o("a691"),l=o("1d80"),c=o("8aa5"),h=o("14c3"),u=Math.max,d=Math.min,p=Math.floor,m=/\$([$&'`]|\d\d?|<[^>]*>)/g,f=/\$([$&'`]|\d\d?)/g,v=function(t){return void 0===t?t:String(t)};s("replace",2,(function(t,e,o,s){var b=s.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,k=s.REPLACE_KEEPS_$0,g=b?"$":"$0";return[function(o,s){var a=l(this),i=void 0==o?void 0:o[t];return void 0!==i?i.call(o,a,s):e.call(String(a),o,s)},function(t,s){if(!b&&k||"string"===typeof s&&-1===s.indexOf(g)){var i=o(e,t,this,s);if(i.done)return i.value}var l=a(t),p=String(this),m="function"===typeof s;m||(s=String(s));var f=l.global;if(f){var C=l.unicode;l.lastIndex=0}var x=[];while(1){var _=h(l,p);if(null===_)break;if(x.push(_),!f)break;var S=String(_[0]);""===S&&(l.lastIndex=c(p,n(l.lastIndex),C))}for(var $="",y=0,B=0;B<x.length;B++){_=x[B];for(var P=String(_[0]),O=u(d(r(_.index),p.length),0),E=[],T=1;T<_.length;T++)E.push(v(_[T]));var L=_.groups;if(m){var A=[P].concat(E,O,p);void 0!==L&&A.push(L);var I=String(s.apply(void 0,A))}else I=w(P,p,O,E,L,s);O>=y&&($+=p.slice(y,O)+I,y=O+P.length)}return $+p.slice(y)}];function w(t,o,s,a,n,r){var l=s+t.length,c=a.length,h=f;return void 0!==n&&(n=i(n),h=m),e.call(r,h,(function(e,i){var r;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return o.slice(0,s);case"'":return o.slice(l);case"<":r=n[i.slice(1,-1)];break;default:var h=+i;if(0===h)return e;if(h>c){var u=p(h/10);return 0===u?e:u<=c?void 0===a[u-1]?i.charAt(1):a[u-1]+i.charAt(1):e}r=a[h-1]}return void 0===r?"":r}))}}))},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,o){var s=o("1d80"),a=o("5899"),i="["+a+"]",n=RegExp("^"+i+i+"*"),r=RegExp(i+i+"*$"),l=function(t){return function(e){var o=String(s(e));return 1&t&&(o=o.replace(n,"")),2&t&&(o=o.replace(r,"")),o}};t.exports={start:l(1),end:l(2),trim:l(3)}},6492:function(t,e,o){},7156:function(t,e,o){var s=o("861d"),a=o("d2bb");t.exports=function(t,e,o){var i,n;return a&&"function"==typeof(i=e.constructor)&&i!==o&&s(n=i.prototype)&&n!==o.prototype&&a(t,n),t}},"7a3a":function(t,e,o){},"7db0":function(t,e,o){"use strict";var s=o("23e7"),a=o("b727").find,i=o("44d2"),n=o("ae40"),r="find",l=!0,c=n(r);r in[]&&Array(1)[r]((function(){l=!1})),s({target:"Array",proto:!0,forced:l||!c},{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),i(r)},"7e12":function(t,e,o){var s=o("da84"),a=o("58a8").trim,i=o("5899"),n=s.parseFloat,r=1/n(i+"-0")!==-1/0;t.exports=r?function(t){var e=a(String(t)),o=n(e);return 0===o&&"-"==e.charAt(0)?-0:o}:n},"88ea":function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("section",{staticClass:"book-main"},[o("section",{staticClass:"book-main"},[o("head-top",{attrs:{"head-title":t.book.title,"go-back":!0,"goback-handler":t.onGoback.bind(null),"show-operator":!1,"is-transparent":!0}},[o("section",{staticClass:"icon share",attrs:{slot:"share"},on:{click:function(e){t.showShareBox=!t.showShareBox}},slot:"share"},[o("svg",{attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[o("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#icon-share"}})])])]),o("section",{staticClass:"book-detail-wrapper"},[o("img",{staticClass:"book-cover-blur",attrs:{src:t.book.cover_url,alt:t.book.title,"aria-hidden":"true"}}),o("section",{staticClass:"book-detail-info"},[o("div",{staticClass:"book-detail-layout"},[o("img",{staticClass:"book-cover book-layout-left",attrs:{src:t.book.cover_url,alt:t.book.title,"aria-labelledby":"ariaBook ariaTime"}}),o("div",{staticClass:"book-layout-right"},[o("header",{staticClass:"book-header"},[o("h6",[t._v(t._s(t.book.title))])]),o("p",{staticClass:"book-meta"},[o("span",{staticClass:"author-name"},[t._v(" "+t._s(t.book.author))]),o("span",{staticClass:"publisher-name"},[t._v(" "+t._s(t.book.publisher?"|"+t.book.publisher:"")+" ")])]),o("p",{staticClass:"book-meta"},[o("span",[t._v(t._s(this.total_words+"萬字|"))]),o("span",{class:{completed:"已完成"===t.book.book_status}},[t._v(t._s(t.book.book_status))])]),o("p",{staticClass:"book-meta"},[o("span",[t._v(t._s("最近更新:"+(t.book.last_updated_date?t.book.last_updated_date:"未有更新")))])])])]),o("div",{staticClass:"book-detail-btn"},[o("div",{staticClass:"btn-group"},[o("div",{staticClass:"btn",on:{click:t.goToChapter}},[t._v(" "+t._s(t.continueChapterId?"繼續閱讀":"開始閱讀")+" ")]),o("div",{staticClass:"btn",class:{inBookshelfColor:t.bookshelfStatus.isInBookshelf},on:{click:t.addToBookShelf}},[t._v(" "+t._s(t.bookshelfStatus.message)+" ")]),o("div",{staticClass:"btn",on:{click:function(e){t.kindle.showKindle=!0}}},[t._v("同步Kindle")])])])])]),o("section",{staticClass:"book-intro-wrapper",class:{showMore:t.isShowMore},on:{click:function(e){t.isShowMore=!t.isShowMore}}},[o("section",{staticClass:"book-summary enabled"},[o("div",{staticClass:"content",class:{showMore:t.isShowMore}},[t._v(" "+t._s(""!==t.book.introduction?t.book.introduction:t.$lang.bookPage.copyRightMessage)+" ")]),o("span",{staticClass:"book-summary-more",class:{showMore:t.isShowMore}},[o("svg",{staticClass:"icon icon-arrow-r",attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[o("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#icon-arrow-r"}})])])])]),o("section",{staticClass:"latest-chapter-wrapper",on:{click:function(e){return t.$router.push({name:"reader",params:{bookid:t.bookid},query:{chapterid:t.lastChapter.id}})}}},[void 0!=t.lastChapter.volume_name?o("span",[t._v(t._s(t.lastChapter.volume_name+" "+t.lastChapter.chapter_name))]):o("span",[t._v("Loading...")]),o("span",[o("svg",{staticClass:"icon icon-arrow-r",attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[o("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#icon-arrow-r"}})])])]),o("section",{staticClass:"book-volume-list-wrapper"},[o("header",[o("h4",[t._v("全卷")]),o("div",[o("span",{staticClass:"order",class:{active:1===t.order},on:{click:function(e){return t.reorderVolumes(1)}}},[t._v("順序")]),o("span",{staticClass:"order",class:{active:-1===t.order},on:{click:function(e){return t.reorderVolumes(-1)}}},[t._v("倒序")])])])]),o("div",{ref:"wrapper",staticClass:"wrapper"},[o("ul",{staticClass:"book-volume-list-ul"},t._l(t.book.volumes,(function(e){return o("li",{key:e.id,staticClass:"book-volume-list-li",on:{click:function(o){return t.getChaptersOfVolume(e)}}},[o("span",{staticClass:"icon-book-container"},[o("svg",{staticClass:"icon icon-book",attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[o("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#icon-book"}})])]),o("span",[t._v(t._s(e.name))])])})),0)])],1),t.volumePanel.showChapterPanel?o("chapter-list",{on:{goback:t.hidePanel}}):t._e(),o("transition",{attrs:{name:"slide",mode:"out-in"}},[t.kindle.showKindle?o("kindle",{on:{onConfirm:t.sendToKindle,onCancel:function(e){t.kindle.showKindle=!1}}}):t._e()],1)],1),t.showLoading||t.kindle.isSubmitting?o("section",{staticClass:"loader",class:{submitting:t.kindle.isSubmitting}},[o("poke-ball",{staticClass:"ball-loader",attrs:{where:"top"}})],1):t._e(),o("section",{directives:[{name:"show",rawName:"v-show",value:t.showShareBox,expression:"showShareBox"}],staticClass:"share-box-mask",on:{click:function(e){e.stopPropagation(),t.showShareBox=!1}}},[o("share-box",{attrs:{book:this.book},on:{onClose:function(e){t.showShareBox=!1}}})],1)])},a=[],i=(o("99af"),o("4de4"),o("7db0"),o("c975"),o("d81d"),o("45fc"),o("b0c0"),o("a9e3"),o("c35a"),o("b680"),o("ac1f"),o("5319"),o("1276"),o("498a"),o("96cf"),o("1da1")),n=o("5530"),r=o("9c6c"),l=o("2f62"),c=o("f8c8"),h=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("head-top",{attrs:{"head-title":t.book.title,"is-transparent":!1}},[o("section",{staticClass:"fake-goback",attrs:{slot:"fake-goback"},on:{click:t.goback},slot:"fake-goback"},[o("svg",{attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[o("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#icon-arrow"}})])])]),t.currentVolumeChapters?o("section",{staticClass:"chapter-list"},[o("header",[o("h4",[t._v(t._s(t.currentVolumeChapters.name))])]),o("div",{ref:"wrapper",staticClass:"wrapper"},[o("ul",{staticClass:"chapter-list-ul"},[t._l(t.currentVolumeChapters.chapters,(function(e){return o("li",{key:e.id,staticClass:"chapter-list-li",on:{click:function(o){return t.$router.push("/reader/"+t.book.id+"?chapterid="+e.id)}}},[o("span",[t._v(t._s(e.chapter_name))])])})),o("li",{staticClass:"chapter-list-li"})],2)])]):t._e()],1)},u=[],d=(o("4160"),o("caad"),o("2532"),o("159b"),o("2909")),p=o("1fba"),m={name:"chapterList",data:function(){return{}},components:{headTop:r["a"]},computed:Object(n["a"])({},Object(l["c"])(["book","currentVolumeChapters"]),{sortedChapterList:function(){if(this.currentVolumeChapters.chapters){var t=Object(d["a"])(this.currentVolumeChapters.chapters),e={num:{"一":1,"二":2,"三":3,"四":4,"五":5,"六":6,"七":7,"八":8,"九":9,"十":10,"終":99999},unit:{"十":10,"百":100,"千":1e3}};return t.forEach((function(t){var o=1;for(var s in e.unit)if(t.chapter_name.includes(s)){o*=e.unit[s];break}for(var a in e.num)if(t.chapter_name.includes(a)){o+=e.num[a];break}t=Object.assign(t,{oid:o})})),t.sort((function(t,e){return t.chapter_name.localeCompare(e.chapter_name,"zh-CN")})),t}return[]}}),mounted:function(){var t=this;this.$nextTick((function(){if(!t.scroll){var e={scrollY:!0,scrollX:!1,mouseWheel:!0,click:!0,taps:!0};t.scroll=new p["a"](t.$refs.wrapper,e),window.scroll(0,0)}}))},methods:{goback:function(){this.$emit("goback")}}},f=m,v=(o("92a9"),o("2877")),b=Object(v["a"])(f,h,u,!1,null,"69309ade",null),k=b.exports,g=o("cf45"),w=o("19f4"),C=o("51be"),x=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"share-box"},[o("header",[o("span",{staticClass:"left"},[t._v("分享小說")]),o("span",{staticClass:"right icon",on:{click:function(e){return e.stopPropagation(),t.onClose(e)}}},[o("svg",{attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[o("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#icon-close"}})])])]),o("section",{staticClass:"content"},[o("div",{staticClass:"content-box-wrapper"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.shareDescription,expression:"shareDescription"}],ref:"contentBox",staticClass:"content-box",attrs:{readonly:""},domProps:{value:t.shareDescription},on:{input:function(e){e.target.composing||(t.shareDescription=e.target.value)}}})]),o("div",{staticClass:"share-icons"},[o("span",{staticClass:"icon copy",on:{click:function(e){return e.stopPropagation(),t.copy(e)}}},[o("svg",{attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[o("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#icon-copy"}})])]),o("a",{staticClass:"icon telegram",attrs:{href:t.shareToSocialMedia("telegram"),rel:"noopener noreferrer",target:"_blank"}},[o("svg",{attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[o("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#icon-telegram"}})])]),o("a",{staticClass:"icon twitter",attrs:{href:t.shareToSocialMedia("twitter"),rel:"noopener noreferrer",target:"_blank"}},[o("svg",{attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[o("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#icon-twitter"}})])]),o("a",{staticClass:"icon facebook",attrs:{href:t.shareToSocialMedia("facebook"),rel:"noopener noreferrer",target:"_blank"}},[o("svg",{attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[o("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#icon-facebook"}})])]),o("a",{staticClass:"icon whatsapp",attrs:{href:t.shareToSocialMedia("whatsapp"),rel:"noopener noreferrer",target:"_blank"}},[o("svg",{attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[o("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#icon-whatsapp"}})])])])])])},_=[],S={name:"shareBox",props:{book:{type:Object}},computed:Object(n["a"])({shareDescription:function(){var t="- 分享自 OpenAcg\n".concat(this.$hostURL+this.$route.fullPath);return Object(g["d"])(this.book)?"Loading ...":"".concat(this.book.title,"\n").concat(this.book.author,"|").concat(this.book.publisher,"\n").concat(this.book.introduction,"\n").concat(t)}},Object(l["c"])(["system"])),methods:{onClose:function(){this.$emit("onClose")},copy:function(){var t=this.$refs.contentBox;try{if("IOS"===this.system){var e=t.readOnly,o=t.contentEditable,s=document.createRange();t.readOnly=!1,t.contentEditable="true",s.selectNodeContents(t);var a=window.getSelection();a.removeAllRanges(),a.addRange(s),t.setSelectionRange(0,9999),t.contentEditable=o,t.readOnly=e}t.select(),document.execCommand("copy"),t.blur(),this.$toast.center(this.$lang.common.copySucess)}catch(i){this.$toast.center(this.$lang.common.copyFailed)}},shareToSocialMedia:function(t){var e="";if(null!==this.book){var o=encodeURIComponent("".concat(this.book.title,"\n- 分享自 OpenAcg\n").concat(this.$hostURL+this.$route.fullPath)),s="tg://msg_url?text=",a="whatsapp://send?text=",i="https://twitter.com/intent/tweet?text=",n='href="https://www.facebook.com/sharer/sharer.php?u="';switch(t){case"telegram":e=s+o;break;case"whatsapp":e=a+o;break;case"twitter":e=i+o;break;case"facebook":e=n+this.$hostURL+this.$route.fullPath;break;default:e="#"}}return e}}},$=S,y=(o("9632"),Object(v["a"])($,x,_,!1,null,"164acf51",null)),B=y.exports,P=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"kindle"}},[o("section",{staticClass:"panel"},[o("header",{staticClass:"item title-bar"},[o("div",{staticClass:"cancel description",on:{click:t.onCancel}},[t._v(t._s(this.$lang.bookPage.cancel))]),o("div",{staticClass:"title description"},[t._v("Kindle Sync")]),o("div",{staticClass:"confirm description",on:{click:t.onConfirm}},[t._v(t._s(this.$lang.bookPage.send))])]),o("section",{staticClass:"main"},[o("section",[o("p",{staticClass:"description tips"},[t._v(t._s(this.$lang.bookPage.kindleSetting))]),o("div",{staticClass:"item"},[o("div",{staticClass:"title left"},[t._v(t._s(this.$lang.bookPage.ebookDevices))]),o("div",{staticClass:"title right",staticStyle:{color:"#aaaaaa"}},[t._v("Kindle")])]),o("div",{staticClass:"item",on:{click:function(e){e.stopPropagation(),t.showEmailBox=!0}}},[o("div",{staticClass:"title left",staticStyle:{color:"blue"}},[t._v(t._s(this.$lang.bookPage.receiveEmailAddress))]),o("div",{staticClass:"title right",staticStyle:{color:"#aaaaaa"}},[t._v(t._s(null!==this.email?this.email:"example@kindle.com"))])]),o("div",{staticClass:"item"},[o("div",{staticClass:"title left"},[t._v(t._s(this.$lang.bookPage.senderEmailAddress))]),o("div",{staticClass:"title right",staticStyle:{color:"#aaaaaa"}},[t._v("openacg@gmx.com")])]),o("section",{directives:[{name:"show",rawName:"v-show",value:t.showEmailBox,expression:"showEmailBox"}],staticClass:"email-box"},[o("header",{staticClass:"item"},[o("div",{staticClass:"cancel description",on:{click:function(e){t.showEmailBox=!1}}},[t._v(t._s(this.$lang.bookPage.cancel))]),o("div",{staticClass:"title description"},[t._v("Kindle Sync")]),o("div",{staticClass:"confirm description",on:{click:function(e){t.showEmailBox=!1}}},[t._v(t._s(this.$lang.bookPage.saveEmail))])]),o("p",{staticClass:"description tips"},[t._v(t._s(t.$lang.bookPage.receiveEmailAddress))]),o("div",{staticClass:"item"},[o("div",{staticClass:"title right email",staticStyle:{color:"#aaaaaa"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"user-email-address",attrs:{type:"email",placeholder:"example@kindle.com"},domProps:{value:t.email},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.showEmailBox=!1},input:function(e){e.target.composing||(t.email=e.target.value)}}})])])])]),o("section",{staticClass:"book-info"},[o("p",{staticClass:"description tips"},[t._v(t._s(this.$lang.bookPage.bookInfo))]),o("div",{staticClass:"item"},[o("div",{staticClass:"title left"},[t._v(t._s(this.$lang.bookPage.bookTitile))]),o("div",{staticClass:"title right",staticStyle:{color:"#aaaaaa","max-width":"75%"}},[t._v(t._s(this.book.title))])]),o("div",{staticClass:"item"},[o("div",{staticClass:"title left"},[t._v(t._s(this.$lang.bookPage.bookAuthor))]),o("div",{staticClass:"title right",staticStyle:{color:"#aaaaaa"}},[t._v(t._s(this.book.author))])]),o("div",{staticClass:"item volume",on:{click:function(e){t.showVolumeSelector=!0}}},[o("div",{staticClass:"title left"},[t._v(t._s(this.$lang.bookPage.bookVolume))]),o("div",{staticClass:"title right icon"},[o("svg",{staticClass:"arrow",attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[t._v("--\x3e "),o("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#icon-arrow-r"}})])])])]),o("section",{directives:[{name:"show",rawName:"v-show",value:!t.showVolumeSelector,expression:"!showVolumeSelector"}]},[o("p",{staticClass:"description tips"},[t._v(t._s(t.$lang.bookPage.tips))]),o("header",{staticClass:"description card"},[o("p",[t._v(t._s(this.$lang.bookPage.sendToKindleDescription))])])]),o("transition",{attrs:{name:"slide",mode:"out-in"}},[o("section",{directives:[{name:"show",rawName:"v-show",value:t.showVolumeSelector,expression:"showVolumeSelector"}],staticClass:"volume-details"},[o("div",{staticClass:"header"},[o("p",{staticClass:"description tips"},[t._v(t._s(this.$lang.bookPage.volumeSelectionTips))]),o("p",{staticClass:"volume-counter description tips"},[t._v(t._s(this.$lang.bookPage.volumeCounterDesc+this.volumeListToBeSent.length))])]),o("div",{staticClass:"volumes"},t._l(this.book.volumes,(function(e,s){return o("div",{key:s,staticClass:"volume-name",class:{active:t.volumeListToBeSent.includes(e)},on:{click:function(o){return t.addVolume(e)}}},[o("p",[t._v(t._s(e.name))])])})),0),o("div",{staticClass:"btn-container"},[o("open-button",{attrs:{disabled:!1,plain:!1,text:this.isSelectedAll?t.$lang.common.reverseAll:t.$lang.common.selectAll,mini:!1,type:"primary"},on:{onClick:function(e){t.isSelectedAll?t.volumeListToBeSent=[]:t.volumeListToBeSent=[].concat(t.book.volumes)}}})],1)])])],1)]),o("section",{directives:[{name:"show",rawName:"v-show",value:t.showEmailBox,expression:"showEmailBox"}],staticClass:"black-mask",on:{click:function(e){t.showEmailBox=!1}}})])},O=[],E=(o("a434"),o("c887")),T={name:"kindle",components:{openButton:E["a"]},computed:Object(n["a"])({},Object(l["c"])(["book","kindleEmailAddress"]),{isSelectedAll:function(){return this.volumeListToBeSent.length===this.book.volumes.length}}),data:function(){return{email:null,volumeListToBeSent:[],showVolumeSelector:!1,showEmailBox:!1}},watch:{showEmailBox:function(t){if(t){var e=document.body.scrollTop;document.body.style.top=-1*e+"px"}else{var o=parseInt(document.body.style.top,10);document.body.scrollTop=-1*o}}},created:function(){this.volumeListToBeSent=Object(d["a"])(this.book.volumes),this.email=this.kindleEmailAddress},methods:Object(n["a"])({},Object(l["b"])(["saveKindleEmailAddress"]),{goback:function(){this.$emit("goback")},addVolume:function(t){if(this.volumeListToBeSent.includes(t)){var e=this.volumeListToBeSent.indexOf(t);-1!==e&&this.volumeListToBeSent.splice(e,1)}else this.volumeListToBeSent.push(t)},onCancel:function(){this.showVolumeSelector?this.showVolumeSelector=!1:this.$emit("onCancel")},onConfirm:function(){var t,e;this.email=null===(t=this.email)||void 0===t?void 0:t.toLowerCase();var o=!Object(g["d"])(null===(e=this.email)||void 0===e?void 0:e.trim())&&/^[a-z0-9](\.?[a-z0-9]){5,}@kindle\.com$$/.test(this.email);o?(this.saveKindleEmailAddress(this.email),this.$emit("onConfirm",{email:this.email,volumes:this.volumeListToBeSent})):(this.showVolumeSelector&&(this.showVolumeSelector=!1),this.$toast.center(this.$lang.bookPage.invalidEmailAddressMsg))}})},L=T,A=(o("9875"),Object(v["a"])(L,P,O,!1,null,"5366d730",null)),I=A.exports,j={name:"Book",created:function(){this.bookid=parseInt(this.$route.params.bookid)},mounted:function(){this.initData(),this.book&&this.book.volumes&&this.createScroll()},data:function(){return{from:null,bookid:null,isShowMore:!1,order:1,showShareBox:!1,bookshelfStatus:{isInBookshelf:!1,message:this.$lang.bookPage.addToBookshelf},volumePanel:{showChapterPanel:!1,chapterList:[],currentVolumeChapters:{}},kindle:{showKindle:!1,isSubmitting:!1}}},beforeRouteEnter:function(t,e,o){o((function(t){t.from=e}))},beforeDestroy:function(){this.saveBook(null)},components:{Kindle:I,ShareBox:B,ChapterList:k,headTop:r["a"],pokeBall:w["a"]},methods:Object(n["a"])({createScroll:function(){var t=this;this.$nextTick((function(){if(!t.scroll){var e={scrollY:!0,scrollX:!1,mouseWheel:!0,click:!0,taps:!0};t.scroll=new p["a"](t.$refs.wrapper,e)}}))},goToChapter:function(){var t=this.continueChapterId?this.continueChapterId:this.firstChapter.id;this.$router.push({name:"reader",params:{bookid:this.bookid},query:{chapterid:t}})}},Object(l["b"])(["saveBook","loadBookshelfList","initChapterList","saveBookToBookshelf","saveCurrentVolumeChapters"]),{hidePanel:function(){this.volumePanel.showChapterPanel=!this.volumePanel.showChapterPanel},getChaptersOfVolume:function(t){if(!Object(g["d"])(this.volumePanel.chapterList)){var e=this.volumePanel.chapterList.filter((function(e){return e.id===t.id}))[0];this.saveCurrentVolumeChapters(e),this.volumePanel.showChapterPanel=!0}},initData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!Object(g["d"])(t.book)){e.next=12;break}return e.next=3,Object(c["e"])(t.bookid);case 3:if(o=e.sent,!Object(g["d"])(o.response)&&!o.response.message){e.next=8;break}return e.next=7,t.$router.replace("/404");case 7:return e.abrupt("return");case 8:o=Object(n["a"])({},o.response),o.cover_url="".concat(C["b"],"/image/")+o.cover_url.split("/").pop(),o.introduction=o.introduction.trim(),t.saveBook(o);case 12:if(t.initChapterList(t.book),!Object(g["d"])(t.bookshelfList)){e.next=16;break}return e.next=16,t.loadBookshelfList();case 16:s=t.bookshelfList.some((function(e){return e.id===t.bookid})),t.bookshelfStatus=s?{isInBookshelf:!0,message:t.$lang.bookPage.hasBeenAddedToBookshelf}:{isInBookshelf:!1,message:t.$lang.bookPage.addToBookshelf};case 18:case"end":return e.stop()}}),e)})))()},reorderVolumes:function(t){if(t!==this.order){this.order=t;var e=Object.assign({},this.book);e.volumes=e.volumes.reverse(),this.saveBook(e)}},addToBookShelf:function(){this.saveBookToBookshelf(this.book)},onGoback:function(){Object(g["d"])(this.from)?this.$router.push({name:"home"}):"keyword"in this.from.query?this.$router.push({name:"home",query:this.from.query}):-1!==this.from.path.indexOf("bookshelf")?this.$router.go(-1):this.$router.push({name:"home"})},sendToKindle:function(t){var e=this,o=null,s=50,a=1,i={email:t.email,title:this.book.title,author:this.book.author,volumes:t.volumes.map((function(t){return t.id}))};this.kindle.isSubmitting=!0,Object(c["a"])(i).then((function(t){if(Object(g["d"])(t.response))e.$toast(e.$lang.bookPage.taskSubmitFailed);else{o=t.response.task_id,e.kindle.isSubmitting=!1,e.kindle.showKindle=!1,e.$toast.center(e.$lang.bookPage.taskSubmitOK);var n=setInterval((function(){a>s&&(e.$toast.center("".concat(i.title," ").concat(e.$lang.bookPage.syncFailed)),clearInterval(n)),Object(c["l"])(o).then((function(t){Object(g["d"])(t.response)||("result"in t.response&&(e.$toast.center("".concat(i.title," ").concat(e.$lang.bookPage.syncOK)),clearInterval(n)),"FAILURE"===t.response.state.toUpperCase()&&(e.$toast.center("".concat(i.title," ").concat(e.$lang.bookPage.syncFailed)),e.$toast.center(e.res.response.task_status),clearInterval(n)))})).catch((function(t){return e.$toast.center("".concat(i.title," ").concat(e.$lang.bookPage.syncFailed))}))}),5e3)}})).catch((function(t){e.kindle.isSubmitting=!1,e.$toast(e.$lang.bookPage.taskSubmitFailed)}))}}),watch:{chapterList:function(t){this.volumePanel.chapterList=t},bookshelfList:function(t){var e=this;this.$nextTick((function(){var o=t.some((function(t){return t.id===e.bookid}));e.bookshelfStatus.isInBookshelf=o,e.bookshelfStatus.message=o?e.$lang.bookPage.hasBeenAddedToBookshelf:e.$lang.bookPage.addToBookshelf}))},book:function(t){Object(g["d"])(t)||this.createScroll()}},computed:Object(n["a"])({bookshelfList:function(){return this.$store.getters.bookshelfList||[]}},Object(l["c"])(["book","recentReadingChapterList","chapterList","system"]),{continueChapterId:function(){var t=this,e=this.recentReadingChapterList.find((function(e){return e.bookid===t.bookid}));return Object(g["d"])(e)?null:e.chapterid},firstChapter:function(){return this.volumePanel.chapterList[0].chapters[0]},lastChapter:function(){if(!Object(g["d"])(this.volumePanel.chapterList)){var t=this.volumePanel.chapterList[this.volumePanel.chapterList.length-1];return Object(n["a"])({},{volume_name:t.name},{},t.chapters[t.chapters.length-1])}return"Loading ..."},showLoading:function(){return!!Object(g["d"])(this.book)},total_words:function(){return this.book.word_count?this.book.word_count<1e4?this.book.word_count:Number.parseFloat(this.book.word_count/1e4).toFixed(1):this.$lang.bookPage.unknownNumber}})},N=j,V=(o("be3a"),Object(v["a"])(N,s,a,!1,null,"acaf9fc0",null));e["default"]=V.exports},"8a07":function(t,e,o){"use strict";var s=o("3ad3"),a=o.n(s);a.a},"92a9":function(t,e,o){"use strict";var s=o("1e32"),a=o.n(s);a.a},9632:function(t,e,o){"use strict";var s=o("df41"),a=o.n(s);a.a},9875:function(t,e,o){"use strict";var s=o("46be"),a=o.n(s);a.a},a434:function(t,e,o){"use strict";var s=o("23e7"),a=o("23cb"),i=o("a691"),n=o("50c4"),r=o("7b0b"),l=o("65f0"),c=o("8418"),h=o("1dde"),u=o("ae40"),d=h("splice"),p=u("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,f=Math.min,v=9007199254740991,b="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!d||!p},{splice:function(t,e){var o,s,h,u,d,p,k=r(this),g=n(k.length),w=a(t,g),C=arguments.length;if(0===C?o=s=0:1===C?(o=0,s=g-w):(o=C-2,s=f(m(i(e),0),g-w)),g+o-s>v)throw TypeError(b);for(h=l(k,s),u=0;u<s;u++)d=w+u,d in k&&c(h,u,k[d]);if(h.length=s,o<s){for(u=w;u<g-s;u++)d=u+s,p=u+o,d in k?k[p]=k[d]:delete k[p];for(u=g;u>g-s+o;u--)delete k[u-1]}else if(o>s)for(u=g-s;u>w;u--)d=u+s-1,p=u+o-1,d in k?k[p]=k[d]:delete k[p];for(u=0;u<o;u++)k[u+w]=arguments[u+2];return k.length=g-s+o,h}})},a9e3:function(t,e,o){"use strict";var s=o("83ab"),a=o("da84"),i=o("94ca"),n=o("6eeb"),r=o("5135"),l=o("c6b6"),c=o("7156"),h=o("c04e"),u=o("d039"),d=o("7c73"),p=o("241c").f,m=o("06cf").f,f=o("9bf2").f,v=o("58a8").trim,b="Number",k=a[b],g=k.prototype,w=l(d(g))==b,C=function(t){var e,o,s,a,i,n,r,l,c=h(t,!1);if("string"==typeof c&&c.length>2)if(c=v(c),e=c.charCodeAt(0),43===e||45===e){if(o=c.charCodeAt(2),88===o||120===o)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:s=2,a=49;break;case 79:case 111:s=8,a=55;break;default:return+c}for(i=c.slice(2),n=i.length,r=0;r<n;r++)if(l=i.charCodeAt(r),l<48||l>a)return NaN;return parseInt(i,s)}return+c};if(i(b,!k(" 0o1")||!k("0b1")||k("+0x1"))){for(var x,_=function(t){var e=arguments.length<1?0:t,o=this;return o instanceof _&&(w?u((function(){g.valueOf.call(o)})):l(o)!=b)?c(new k(C(e)),o,_):C(e)},S=s?p(k):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),$=0;S.length>$;$++)r(k,x=S[$])&&!r(_,x)&&f(_,x,m(k,x));_.prototype=g,g.constructor=_,n(a,b,_)}},be3a:function(t,e,o){"use strict";var s=o("7a3a"),a=o.n(s);a.a},c35a:function(t,e,o){var s=o("23e7"),a=o("7e12");s({target:"Number",stat:!0,forced:Number.parseFloat!=a},{parseFloat:a})},c887:function(t,e,o){"use strict";var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("button",{staticClass:"openBtn",class:t.classes,attrs:{disabled:t.disabled,type:t.buttonType},on:{click:function(e){return e.stopPropagation(),t.onClick(e)}}},[t._t("icon"),o("span",[t._v(t._s(t.text))])],2)},a=[],i={name:"openButton",data:function(){return{noBorder:!0}},methods:{onClick:function(){!this.disabled&&this.$emit("onClick")}},props:{type:{default:"default"},disabled:Boolean,mini:Boolean,plain:Boolean,text:String,buttonType:String},computed:{classes:function(){var t=this;return[{disabled:!t.plain&&t.disabled,"plain-disabled":t.plain&&t.disabled,mini:t.mini,"openBtn-no-border":t.noBorder},t.plain?"":"".concat(t.type),t.plain?"plain-".concat(t.type):""]}}},n=i,r=(o("ca69"),o("2877")),l=Object(r["a"])(n,s,a,!1,null,"0a80298c",null);e["a"]=l.exports},c8d2:function(t,e,o){var s=o("d039"),a=o("5899"),i="​᠎";t.exports=function(t){return s((function(){return!!a[t]()||i[t]()!=i||a[t].name!==t}))}},c975:function(t,e,o){"use strict";var s=o("23e7"),a=o("4d64").indexOf,i=o("a640"),n=o("ae40"),r=[].indexOf,l=!!r&&1/[1].indexOf(1,-0)<0,c=i("indexOf"),h=n("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:l||!c||!h},{indexOf:function(t){return l?r.apply(this,arguments)||0:a(this,t,arguments.length>1?arguments[1]:void 0)}})},ca69:function(t,e,o){"use strict";var s=o("6492"),a=o.n(s);a.a},d81d:function(t,e,o){"use strict";var s=o("23e7"),a=o("b727").map,i=o("1dde"),n=o("ae40"),r=i("map"),l=n("map");s({target:"Array",proto:!0,forced:!r||!l},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},df41:function(t,e,o){}}]);